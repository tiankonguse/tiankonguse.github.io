---   
layout:     post  
title:  定多个闹钟的弊端  
description: 一直以为定多个闹钟很好，直到遇到一件事。  
keywords: 程序人生  
tags: [程序人生]    
categories: [程序人生]  
updateData:  2020-04-08 21:30:00  
published: true  
---  


## 一、背景  


在之前的四五年里，我都是定一个闹钟的。  


大概半年前，可能年纪大了吧，有一次起不来了，就顺手加了一个闹钟。  


就这样，每天早上第一个闹钟响之后，会关掉继续睡觉，第二个响的时候再起床。  


直到周三这一天，我醒来的时候已经十一点多了，而记忆中闹钟明明只响了一次。  


思考一下可能是三个原因导致的：太困、温度、习惯。  


## 二、太困了  


周二虽说是节后的第一天工作日，但是这一天有两件事使得大脑比以往消耗更多地精力。  


第一件事是在做中台、上云、EP的过程中，云上遇到一个问题。  
表现就是服务一会一个失败毛刺。  


云上之前一直有相同母机上不同容器间互相影响的问题，当然这是云上隔离没做好的缘故。  


根据以往的经验，业务测只能根据监控来找有失败的容器，然后手动下线对应的容器即可。  
我就这样不断的看监控，找失败的容器，下线。  


操作过程中，遇到了容器无法下线的问题，只能联系云平台的负责人，问是怎么了。  


云平台的负责人定位了一会，说是云平台的BUG。  
这个BUG会导致下线的容器全部有问题。  


云平台建议我先不要做任何操作，等他们发版本修复BUG后再进行操作。  
此时我是崩溃的，但是又没什么办法。  


后来他们修复问题后，我一台台找到有问题的容器，手动下线。  
话说这个过程也特别麻烦，没有工具，只能手动来。  


由于不断的有业务在反馈有问题，我需要高度集中注意力来做这件事，消耗了大量的精力。  


第二件事是验证容器间互相影响是否修复。  


前面提到云上的隔离没做好，容器间会互相影响。  
上周五他们说修复了，我还没来得及验证。  
今天我需要压测来验证隔离问题是否修复。  


一开始是使用压测工具进行压测的。  
由于是缓存系统，压测工具压测效果并不好。  
因为命中率非常高，QPS非常高的时候，CPU也非常低。  


后来想使用 tcpcopy 复制线上流量，但是没有 root 权限。  
最终只好使用线上的流量来实测了。  


只有在高负载的时候容器间才会互相影响，所以我找了相同机器上的不同容器，慢慢调大负载均衡对那些容器的流量。  
起初是一倍的流量，后面是二倍，四倍，直到最后十倍。  


经过验证，容器高负载的时候，确实没有发生互相影响了。  


这个事情全程操作的线上服务，神经高度绷紧，也消耗不少精力。  


十二点打车回家的时候，洗了脚后本想看一会书，但是看一页眼睛就睁不开了，躺床上就睡着了。  


## 三、环境温度  


深圳比较热，穿上睡衣睡觉会比较热。  
我是那种怕热不怕冷的人，被窝暖热了肯定会出汗的。  


所以以前的时候，我睡觉都不穿衣服的。  
当然不是裸睡，是不像电视上那样穿的有睡衣睡裤。  
这样也会导致另一个问题：早上起床的时候，我的被窝竟然都是凉凉的。  



而周二那晚睡觉的时候，我是穿着上衣睡觉的，而且是穿了两件。  


这样睡觉的时候，被窝里就格外的温暖，睡的自然也就比以前深沉了。  


## 三、本能习惯  


如果仅仅是太困了和温度适宜还不会导致闹钟没把我喊起来，毕竟闹钟不按的话会一直响的。  


更重要的是定了多个闹钟，形成了一个习惯：第一次响的时候顺手关掉闹钟。  


这个顺手关掉闹钟有个前提，是头脑清醒的时候。  
第一次响的时候，头脑里清楚这是第几次，会判断是否可以继续睡觉。 


可是比较困、温度适宜、睡的比较死的时候，头脑就没有那么清醒了。  
闹钟最后一次响的时候，会以为是第一次响的，然后出于本能随手关闭闹钟。  


## 四、最后  


当然，定了闹钟没被喊起来可能很多人都遇到过。  


原因到底是什么也不好说，偶尔回来特别困以前也时有发生。  


我认为是多个闹钟、比较困、温度适宜、习惯性关闭闹钟、还有一定的概率，结合在一起导致的。  


你认为呢？  


《完》


-EOF-  



本文公众号：天空的代码世界  
个人微信号：tiankonguse  
公众号ID：tiankonguse-code  
知识星球：不止算法  

